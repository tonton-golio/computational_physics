<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 420">
  <rect x="0" y="0" width="900" height="420" fill="#0f172a"/>
  <rect x="0" y="0" width="900" height="56" fill="#1e293b"/>
  <text x="24" y="38" fill="#e2e8f0" font-family="Arial, sans-serif" font-size="22" font-weight="bold">Loss Function Comparison — How Outliers Pull the Fit</text>

  <!-- Panel grid: 4 panels, each 200×160, starting at y=72 -->
  <!-- Panel 1: MSE (top-left) -->
  <g transform="translate(30,68)">
    <rect x="0" y="0" width="200" height="168" fill="#1e293b" rx="6"/>
    <text x="100" y="22" fill="#e2e8f0" font-family="Arial, sans-serif" font-size="15" text-anchor="middle" font-weight="bold">MSE</text>
    <!-- axes -->
    <line x1="30" y1="148" x2="185" y2="148" stroke="#334155" stroke-width="1.5"/>
    <line x1="30" y1="32" x2="30" y2="148" stroke="#334155" stroke-width="1.5"/>
    <!-- 15 data points along a line y = 0.4x + 40 (in pixel coords, inverted y) -->
    <circle cx="40" cy="130" r="3.5" fill="#3b82f6"/>
    <circle cx="52" cy="125" r="3.5" fill="#3b82f6"/>
    <circle cx="60" cy="122" r="3.5" fill="#3b82f6"/>
    <circle cx="68" cy="118" r="3.5" fill="#3b82f6"/>
    <circle cx="78" cy="114" r="3.5" fill="#3b82f6"/>
    <circle cx="86" cy="110" r="3.5" fill="#3b82f6"/>
    <circle cx="96" cy="105" r="3.5" fill="#3b82f6"/>
    <circle cx="106" cy="100" r="3.5" fill="#3b82f6"/>
    <circle cx="114" cy="96" r="3.5" fill="#3b82f6"/>
    <circle cx="124" cy="92" r="3.5" fill="#3b82f6"/>
    <circle cx="132" cy="88" r="3.5" fill="#3b82f6"/>
    <circle cx="140" cy="84" r="3.5" fill="#3b82f6"/>
    <circle cx="150" cy="80" r="3.5" fill="#3b82f6"/>
    <circle cx="158" cy="76" r="3.5" fill="#3b82f6"/>
    <circle cx="168" cy="72" r="3.5" fill="#3b82f6"/>
    <!-- 3 outliers (high leverage, pulled up) -->
    <circle cx="145" cy="42" r="4" fill="#ef4444"/>
    <circle cx="160" cy="38" r="4" fill="#ef4444"/>
    <circle cx="170" cy="45" r="4" fill="#ef4444"/>
    <!-- MSE fit line — pulled toward outliers -->
    <line x1="35" y1="138" x2="175" y2="48" stroke="#10b981" stroke-width="2.5"/>
    <!-- Residual band showing pull -->
    <line x1="145" y1="42" x2="145" y2="72" stroke="#ef4444" stroke-width="1" stroke-dasharray="4 3" opacity="0.6"/>
    <line x1="160" y1="38" x2="160" y2="62" stroke="#ef4444" stroke-width="1" stroke-dasharray="4 3" opacity="0.6"/>
    <line x1="170" y1="45" x2="170" y2="55" stroke="#ef4444" stroke-width="1" stroke-dasharray="4 3" opacity="0.6"/>
    <text x="100" y="164" fill="#f87171" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">fit dragged toward outliers</text>
  </g>

  <!-- Panel 2: MAE (top-right) -->
  <g transform="translate(248,68)">
    <rect x="0" y="0" width="200" height="168" fill="#1e293b" rx="6"/>
    <text x="100" y="22" fill="#e2e8f0" font-family="Arial, sans-serif" font-size="15" text-anchor="middle" font-weight="bold">MAE</text>
    <line x1="30" y1="148" x2="185" y2="148" stroke="#334155" stroke-width="1.5"/>
    <line x1="30" y1="32" x2="30" y2="148" stroke="#334155" stroke-width="1.5"/>
    <!-- same data points -->
    <circle cx="40" cy="130" r="3.5" fill="#3b82f6"/>
    <circle cx="52" cy="125" r="3.5" fill="#3b82f6"/>
    <circle cx="60" cy="122" r="3.5" fill="#3b82f6"/>
    <circle cx="68" cy="118" r="3.5" fill="#3b82f6"/>
    <circle cx="78" cy="114" r="3.5" fill="#3b82f6"/>
    <circle cx="86" cy="110" r="3.5" fill="#3b82f6"/>
    <circle cx="96" cy="105" r="3.5" fill="#3b82f6"/>
    <circle cx="106" cy="100" r="3.5" fill="#3b82f6"/>
    <circle cx="114" cy="96" r="3.5" fill="#3b82f6"/>
    <circle cx="124" cy="92" r="3.5" fill="#3b82f6"/>
    <circle cx="132" cy="88" r="3.5" fill="#3b82f6"/>
    <circle cx="140" cy="84" r="3.5" fill="#3b82f6"/>
    <circle cx="150" cy="80" r="3.5" fill="#3b82f6"/>
    <circle cx="158" cy="76" r="3.5" fill="#3b82f6"/>
    <circle cx="168" cy="72" r="3.5" fill="#3b82f6"/>
    <!-- same outliers -->
    <circle cx="145" cy="42" r="4" fill="#ef4444"/>
    <circle cx="160" cy="38" r="4" fill="#ef4444"/>
    <circle cx="170" cy="45" r="4" fill="#ef4444"/>
    <!-- MAE fit — stays close to bulk data -->
    <line x1="35" y1="134" x2="175" y2="66" stroke="#10b981" stroke-width="2.5"/>
    <!-- outlier residuals are large but not penalized quadratically -->
    <line x1="145" y1="42" x2="145" y2="80" stroke="#ef4444" stroke-width="1" stroke-dasharray="4 3" opacity="0.4"/>
    <line x1="160" y1="38" x2="160" y2="70" stroke="#ef4444" stroke-width="1" stroke-dasharray="4 3" opacity="0.4"/>
    <line x1="170" y1="45" x2="170" y2="63" stroke="#ef4444" stroke-width="1" stroke-dasharray="4 3" opacity="0.4"/>
    <text x="100" y="164" fill="#10b981" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">robust to outliers</text>
  </g>

  <!-- Panel 3: Huber (bottom-left) -->
  <g transform="translate(30,252)">
    <rect x="0" y="0" width="200" height="168" fill="#1e293b" rx="6"/>
    <text x="100" y="22" fill="#e2e8f0" font-family="Arial, sans-serif" font-size="15" text-anchor="middle" font-weight="bold">Huber</text>
    <line x1="30" y1="148" x2="185" y2="148" stroke="#334155" stroke-width="1.5"/>
    <line x1="30" y1="32" x2="30" y2="148" stroke="#334155" stroke-width="1.5"/>
    <circle cx="40" cy="130" r="3.5" fill="#3b82f6"/>
    <circle cx="52" cy="125" r="3.5" fill="#3b82f6"/>
    <circle cx="60" cy="122" r="3.5" fill="#3b82f6"/>
    <circle cx="68" cy="118" r="3.5" fill="#3b82f6"/>
    <circle cx="78" cy="114" r="3.5" fill="#3b82f6"/>
    <circle cx="86" cy="110" r="3.5" fill="#3b82f6"/>
    <circle cx="96" cy="105" r="3.5" fill="#3b82f6"/>
    <circle cx="106" cy="100" r="3.5" fill="#3b82f6"/>
    <circle cx="114" cy="96" r="3.5" fill="#3b82f6"/>
    <circle cx="124" cy="92" r="3.5" fill="#3b82f6"/>
    <circle cx="132" cy="88" r="3.5" fill="#3b82f6"/>
    <circle cx="140" cy="84" r="3.5" fill="#3b82f6"/>
    <circle cx="150" cy="80" r="3.5" fill="#3b82f6"/>
    <circle cx="158" cy="76" r="3.5" fill="#3b82f6"/>
    <circle cx="168" cy="72" r="3.5" fill="#3b82f6"/>
    <circle cx="145" cy="42" r="4" fill="#ef4444"/>
    <circle cx="160" cy="38" r="4" fill="#ef4444"/>
    <circle cx="170" cy="45" r="4" fill="#ef4444"/>
    <!-- Huber fit — close to MAE, slightly pulled -->
    <line x1="35" y1="135" x2="175" y2="64" stroke="#10b981" stroke-width="2.5"/>
    <line x1="145" y1="42" x2="145" y2="78" stroke="#ef4444" stroke-width="1" stroke-dasharray="4 3" opacity="0.4"/>
    <line x1="160" y1="38" x2="160" y2="68" stroke="#ef4444" stroke-width="1" stroke-dasharray="4 3" opacity="0.4"/>
    <line x1="170" y1="45" x2="170" y2="61" stroke="#ef4444" stroke-width="1" stroke-dasharray="4 3" opacity="0.4"/>
    <text x="100" y="164" fill="#10b981" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">best of both worlds</text>
  </g>

  <!-- Panel 4: Penalty curves (bottom-right) -->
  <g transform="translate(248,252)">
    <rect x="0" y="0" width="200" height="168" fill="#1e293b" rx="6"/>
    <text x="100" y="22" fill="#e2e8f0" font-family="Arial, sans-serif" font-size="15" text-anchor="middle" font-weight="bold">Penalty Curves</text>
    <line x1="30" y1="148" x2="185" y2="148" stroke="#334155" stroke-width="1.5"/>
    <line x1="30" y1="32" x2="30" y2="148" stroke="#334155" stroke-width="1.5"/>
    <text x="108" y="162" fill="#94a3b8" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">error</text>
    <text x="18" y="90" fill="#94a3b8" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" transform="rotate(-90,18,90)">penalty</text>
    <!-- MSE curve (quadratic — steep) -->
    <path d="M100,148 Q102,147 105,142 Q110,132 115,118 Q120,100 130,72 Q140,42 150,38" stroke="#ef4444" stroke-width="2" fill="none"/>
    <path d="M100,148 Q98,147 95,142 Q90,132 85,118 Q80,100 70,72 Q60,42 50,38" stroke="#ef4444" stroke-width="2" fill="none"/>
    <!-- MAE curve (linear — V shape) -->
    <line x1="50" y1="58" x2="100" y2="148" stroke="#3b82f6" stroke-width="2"/>
    <line x1="100" y1="148" x2="150" y2="58" stroke="#3b82f6" stroke-width="2"/>
    <!-- Huber curve (smooth transition) -->
    <path d="M100,148 Q103,145 108,136 Q115,120 122,108 Q130,96 140,82 Q148,72 155,62" stroke="#f59e0b" stroke-width="2" fill="none"/>
    <path d="M100,148 Q97,145 92,136 Q85,120 78,108 Q70,96 60,82 Q52,72 45,62" stroke="#f59e0b" stroke-width="2" fill="none"/>
    <!-- Legend -->
    <line x1="120" y1="36" x2="136" y2="36" stroke="#ef4444" stroke-width="2"/>
    <text x="140" y="40" fill="#ef4444" font-family="Arial, sans-serif" font-size="10">MSE</text>
    <line x1="120" y1="50" x2="136" y2="50" stroke="#3b82f6" stroke-width="2"/>
    <text x="140" y="54" fill="#3b82f6" font-family="Arial, sans-serif" font-size="10">MAE</text>
    <line x1="120" y1="64" x2="136" y2="64" stroke="#f59e0b" stroke-width="2"/>
    <text x="140" y="68" fill="#f59e0b" font-family="Arial, sans-serif" font-size="10">Huber</text>
  </g>

  <!-- Right-side annotation panel -->
  <g transform="translate(480,68)">
    <rect x="0" y="0" width="390" height="352" fill="#1e293b" rx="6"/>
    <text x="195" y="28" fill="#e2e8f0" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">Key Takeaway</text>

    <!-- Visual legend -->
    <circle cx="30" cy="60" r="6" fill="#3b82f6"/>
    <text x="46" y="64" fill="#94a3b8" font-family="Arial, sans-serif" font-size="13">Normal data (15 points)</text>
    <circle cx="30" cy="84" r="6" fill="#ef4444"/>
    <text x="46" y="88" fill="#94a3b8" font-family="Arial, sans-serif" font-size="13">Outliers (3 points)</text>
    <line x1="22" y1="106" x2="38" y2="106" stroke="#10b981" stroke-width="2.5"/>
    <text x="46" y="110" fill="#94a3b8" font-family="Arial, sans-serif" font-size="13">Fitted regression line</text>

    <!-- Comparison arrows -->
    <g transform="translate(20,140)">
      <text x="0" y="0" fill="#ef4444" font-family="Arial, sans-serif" font-size="14" font-weight="bold">MSE</text>
      <text x="50" y="0" fill="#94a3b8" font-family="Arial, sans-serif" font-size="13">Squares errors — outliers dominate.</text>
      <text x="50" y="18" fill="#94a3b8" font-family="Arial, sans-serif" font-size="13">Fit dragged heavily toward red points.</text>

      <text x="0" y="52" fill="#3b82f6" font-family="Arial, sans-serif" font-size="14" font-weight="bold">MAE</text>
      <text x="50" y="52" fill="#94a3b8" font-family="Arial, sans-serif" font-size="13">Linear penalty — treats all errors equally.</text>
      <text x="50" y="70" fill="#94a3b8" font-family="Arial, sans-serif" font-size="13">Fit stays with the majority of data.</text>

      <text x="0" y="104" fill="#f59e0b" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Huber</text>
      <text x="50" y="104" fill="#94a3b8" font-family="Arial, sans-serif" font-size="13">MSE for small errors, MAE for large.</text>
      <text x="50" y="122" fill="#94a3b8" font-family="Arial, sans-serif" font-size="13">Smooth near zero, robust to outliers.</text>
    </g>

    <!-- Bottom message -->
    <rect x="20" y="300" width="350" height="36" fill="#0f172a" rx="4"/>
    <text x="195" y="323" fill="#f59e0b" font-family="Arial, sans-serif" font-size="13" text-anchor="middle">The loss function you choose determines which errors matter most.</text>
  </g>
</svg>
